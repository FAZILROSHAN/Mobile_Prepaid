<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MobiCharge - User Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/Mobile_prepaid/user/css/navbar.css">
    <script src="/Mobile_prepaid/user/Js/navbar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-color: #4f46e5;
            --secondary-color: #6366f1;
            --accent-color: #4338ca;
            --dark-color: #2d3748;
            --success-color: #00FA9A;
            --warning-color: #FFD700;
            --danger-color: #e53e3e;
            --gradient-1: linear-gradient(135deg, #6366f1, #4f46e5);
            --gradient-2: linear-gradient(135deg, #4f46e5, #6366f1);
            --shadow-sm: 0 5px 15px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 10px 30px rgba(79, 70, 229, 0.15);
            --shadow-lg: 0 15px 30px rgba(79, 70, 229, 0.1);
            --rounded-sm: 8px;
            --rounded-md: 12px;
            --rounded-lg: 15px;
        }
        
        body {
            background-color: #f0f2fa;
            padding-top: 70px;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            margin: 0;
            color: var(--dark-color);
        }
        
        .card {
            margin-bottom: 20px;
            border-radius: var(--rounded-md);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
            overflow: hidden;
            background-color: white;
            max-width: 320px;
            width: 100%;
            height: 220px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }
        
        .card-header {
            background-color: rgba(79, 70, 229, 0.05);
            border-bottom: 1px solid rgba(79, 70, 229, 0.1);
            font-weight: 600;
            padding: 12px;
        }
        
        .sidebar {
            background: var(--gradient-2);
            padding: 15px;
            border-radius: var(--rounded-md);
            color: white;
            position: fixed;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            transition: width 0.3s ease;
            z-index: 1000;
            box-shadow: var(--shadow-md);
        }
        
        .sidebar-toggle {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px;
            border-radius: var(--rounded-sm);
            width: 100%;
            text-align: center;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .sidebar-toggle:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .nav-link {
            color: white;
            padding: 12px 15px;
            margin: 5px 0;
            border-radius: var(--rounded-sm);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-weight: 500;
        }
        
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        
        .nav-link.active {
            background-color: var(--secondary-color);
            color: white;
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3);
        }
        
        .nav-text {
            margin-left: 10px;
        }
        
        .progress {
            height: 12px;
            background-color: #e2e8f0;
            border-radius: 6px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: var(--gradient-1) !important;
            box-shadow: 0 2px 5px rgba(79, 70, 229, 0.3);
        }
        
        .btn-primary {
            background: var(--primary-color) !important;
            border: none !important;
            box-shadow: 0 4px 6px rgba(79, 70, 229, 0.2);
            transition: all 0.3s ease;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: var(--rounded-sm);
            font-size: 0.85rem;
        }
        
        .btn-primary:hover {
            background: var(--accent-color) !important;
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(79, 70, 229, 0.3);
        }
        
        .btn-secondary {
            background-color: #718096;
            border: none;
            box-shadow: 0 4px 6px rgba(113, 128, 150, 0.2);
            padding: 8px 15px;
            border-radius: var(--rounded-sm);
            color: white;
        }
        
        .btn-light {
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            color: var(--primary-color);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-weight: 500;
            padding: 8px 15px;
            border-radius: var(--rounded-sm);
        }
        
        .btn-light:hover {
            background-color: white;
            color: var(--accent-color);
        }
        
        .text-primary {
            color: var(--primary-color) !important;
        }
        
        .bg-primary {
            background-color: var(--primary-color) !important;
        }
        
        .badge {
            padding: 6px 10px;
            font-weight: 500;
            border-radius: 20px;
        }
        
        .badge.bg-success {
            background-color: var(--success-color) !important;
        }
        
        .badge.bg-dark {
            background-color: var(--dark-color) !important;
        }
        
        .content-section {
            display: none;
            animation: fadeInUp 0.5s ease;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .wallet-balance {
            background: var(--gradient-1);
            color: white;
            padding: 25px;
            border-radius: var(--rounded-md);
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            max-width: 960px;
            width: 100%;
        }
        
        .wallet-balance::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
            z-index: 0;
        }
        
        .wallet-balance h3, .wallet-balance h5 {
            position: relative;
            z-index: 1;
        }
        
        .wallet-balance h3 {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 10px 0 15px;
        }
        
        .form-control {
            border-radius: var(--rounded-sm);
            border: 1px solid #e2e8f0;
            padding: 12px 15px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
            outline: none;
        }
        
        .form-control.invalid {
            border-color: var(--danger-color);
        }
        
        .error-message {
            color: var(--danger-color);
            font-size: 0.8rem;
            display: none;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            display: none;
            z-index: 998;
        }
        
        .modal-confirm {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 25px;
            border-radius: var(--rounded-md);
            box-shadow: var(--shadow-md);
            z-index: 1000;
            display: none;
            width: 90%;
            max-width: 350px;
            border-left: 6px solid var(--primary-color);
        }
        
        .modal-confirm h5 {
            color: var(--dark-color);
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .modal-confirm .btn {
            margin: 5px;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(45, 55, 72, 0.9);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }
        
        .loader {
            border: 8px solid rgba(255, 255, 255, 0.2);
            border-top: 8px solid var(--secondary-color);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .usage-item {
            margin-bottom: 20px;
            background-color: #f8fafc;
            padding: 15px;
            border-radius: var(--rounded-sm);
        }
        
        .usage-item h6 {
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .usage-item p {
            margin: 8px 0 0;
            font-size: 0.9rem;
            color: #718096;
        }
        
        .fas {
            transition: all 0.3s ease;
        }
        
        .card:hover .fas {
            transform: scale(1.2);
            color: var(--primary-color);
        }
        
        .table {
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
        }
        
        .table th {
            background-color: rgba(79, 70, 229, 0.05);
            color: var(--dark-color);
            font-weight: 600;
            padding: 12px;
        }
        
        .table td {
            padding: 12px;
            vertical-align: middle;
        }
        
        .table tbody tr {
            transition: all 0.3s ease;
        }
        
        .table tbody tr:hover {
            background-color: rgba(79, 70, 229, 0.05);
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            margin-left: -15px;
            margin-right: -15px;
        }
        
        .col-md-4 {
            flex: 0 0 33.333333%;
            max-width: 33.333333%;
            padding-left: 15px;
            padding-right: 15px;
            box-sizing: border-box;
        }
        
        .card {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .card-body {
            padding: 15px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            flex-grow: 1;
        }
        
        .card-body h5 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .card-body p {
            margin: 5px 0;
            font-size: 0.85rem;
        }
        
        .card-body .btn-primary {
            padding: 6px 12px;
            font-size: 0.85rem;
            margin-top: 5px;
        }
        
        .large-card {
            max-width: 100%;
            height: auto;
            margin: 0 auto 20px;
        }
        
        .profile-icon-container {
            width: 80px;
            height: 80px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            margin-bottom: 15px;
        }
        
        .profile-icon-container i {
            font-size: 40px;
            color: white;
        }
        
        @media (max-width: 991px) {
            .sidebar {
                width: 60px;
                left: 0;
            }
            .sidebar.expanded {
                width: 250px;
            }
            .sidebar .text-center,
            .sidebar .nav-text,
            .sidebar hr {
                display: none;
            }
            .sidebar.expanded .text-center,
            .sidebar.expanded .nav-text,
            .sidebar.expanded hr {
                display: block;
            }
            .content-section {
                margin-left: 70px;
            }
            .col-md-4 {
                flex: 0 0 100%;
                max-width: 100%;
            }
            .card {
                height: auto;
                max-width: 100%;
            }
        }
        
        @media (min-width: 992px) {
            .sidebar {
                position: sticky;
                left: 0;
                top: 70px;
                width: 100%;
                height: calc(100vh - 70px);
            }
            .sidebar-toggle {
                display: none;
            }
            .content-section {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <img src="/Mobile_prepaid/images/267d178586383a2541d409b8e8dd90a7.png" alt="Mobi charge">
        </div>
        <div class="menu-toggle">☰</div>
        <ul class="nav-links">
            <li><a href="homepage.html" class="active">Home</a></li>
            <li><a href="plans.html">Plans</a></li>
            <li><a href="recharge.html">Recharge</a></li>
            <li><a href="about.html">About Us</a></li>
            <li class="icon"><a href="contact.html">Contact Us</a></li>
            <li class="nav-item dropdown">
                <a id="authLink" class="nav-link">Sign Up</a>
                <div class="dropdown-menu" id="userDropdown">
                    <span id="userNumber"></span>
                    <p id="logoutBtn" onclick="location.href='get_phone.html';" style="color: black;">Login</p>
                    <button id="profile" style="display: none;" onclick="window.location.href='user_dashboard.html'">Profile</button>
                    <button id="logout" style="display: none;">Logout</button>
                </div>
            </li>
        </ul>
    </div>
    <br><br>
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3 mb-4">
                <div class="sidebar">
                    <button class="sidebar-toggle" id="sidebarToggle"><i class="fas fa-bars"></i></button>
                    <div class="text-center mb-4">
                        <div class="profile-icon-container mx-auto">
                            <i class="fas fa-user"></i>
                        </div>
                        <h5 id="userName">Karthik Rajan</h5>
                        <p class="mb-0">+91 9876543210</p>
                        <small>Last Login: Mar 01, 2025</small>
                    </div>
                    <hr style="border-color: rgba(255, 255, 255, 0.3);">
                    <div class="nav flex-column">
                        <a class="nav-link active menu-link" href="#" data-target="dashboard-section"><i class="fas fa-tachometer-alt"></i><span class="nav-text">Dashboard</span></a>
                        <a class="nav-link menu-link" href="#" data-target="plans-section"><i class="fas fa-mobile-alt"></i><span class="nav-text">My Plans</span></a>
                        <a class="nav-link menu-link" href="#" data-target="wallet-section"><i class="fas fa-wallet"></i><span class="nav-text">Wallet</span></a>
                        <a class="nav-link menu-link" href="#" data-target="transactions-section"><i class="fas fa-history"></i><span class="nav-text">Recharge History</span></a>
                        <a class="nav-link menu-link" href="#" data-target="offers-section"><i class="fas fa-gift"></i><span class="nav-text">Offers</span> <span class="badge bg-dark rounded-pill ms-2">3 New</span></a>
                        <a class="nav-link menu-link" href="#" data-target="settings-section"><i class="fas fa-cog"></i><span class="nav-text">Account Settings</span></a>
                        <a class="nav-link menu-link" href="#" data-target="support-section"><i class="fas fa-question-circle"></i><span class="nav-text">Help & Support</span></a>
                        <a class="nav-link text-light" href="#" id="logoutLink"><i class="fas fa-sign-out-alt"></i><span class="nav-text">Logout</span></a>
                    </div>
                </div>
            </div>

            <div class="col-lg-9 col-md-9">
                <!-- Dashboard Section -->
                <div id="dashboard-section" class="content-section active">
                    <div class="card large-card mb-4">
                        <div class="card-body">
                            <h4>Welcome back, <span id="welcomeName" style="color: var(--primary-color); font-weight: 600;">Karthik</span>!</h4>
                            <p>Your plan expires in <span style="font-weight: 600; color: var(--primary-color);">15 days</span>. Next recharge due: <span style="font-weight: 600;">Mar 15, 2025</span></p>
                            <div class="row mt-3">
                                <div class="col-md-4 usage-item">
                                    <h6><i class="fas fa-wifi me-2"></i> Data Left</h6>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 42%;" aria-valuenow="42" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <p>12 GB of 28 GB</p>
                                </div>
                                <div class="col-md-4 usage-item">
                                    <h6><i class="fas fa-phone me-2"></i> Voice</h6>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <p>Unlimited (245 mins used)</p>
                                </div>
                                <div class="col-md-4 usage-item">
                                    <h6><i class="fas fa-comment me-2"></i> SMS</h6>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 85%;" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <p>850 of 1000 remaining</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="fas fa-bolt text-primary mb-3" style="font-size: 2.5rem;"></i>
                                    <h5>Quick Recharge</h5>
                                    <button class="btn btn-primary mt-2" onclick="window.location.href='plans.html'">Recharge Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="fas fa-gift text-primary mb-3" style="font-size: 2.5rem;"></i>
                                    <h5>Special Offers</h5>
                                    <button class="btn btn-primary mt-2" data-target="offers-section">View Offers</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="fas fa-wallet text-primary mb-3" style="font-size: 2.5rem;"></i>
                                    <h5>Wallet</h5>
                                    <p id="dashWallet" style="font-size: 1.2rem; font-weight: 600;">₹500.00</p>
                                    <button class="btn btn-primary mt-2" data-target="wallet-section">Manage</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-chart-line me-2 text-primary"></i> Usage Trends</h5>
                                    <p>Data: 10.5 GB<br>Calls: 245 mins<br>SMS: 85 sent</p>
                                    <div class="progress">
                                        <div class="progress-bar" style="width: 70%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-user-check me-2 text-primary"></i> Account Stats</h5>
                                    <p>Total Recharges: ₹15,495<br>Active Since: Jan 2023<br>Avg. Spend: ₹1,290</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-signal me-2 text-primary"></i> Network Status</h5>
                                    <p>Signal: 4G (Strong)<br>Speed: 25 Mbps<br>Location: Mumbai</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Plans Section -->
                <div id="plans-section" class="content-section">
                    <div class="card large-card mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-mobile-alt me-2"></i> Current Plan Details</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mt-3">
                                <div class="col-md-4 usage-item">
                                    <h6>Data Usage</h6>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <p>15.2 GB used of 28 GB total</p>
                                </div>
                                <div class="col-md-4 usage-item">
                                    <h6>Voice Usage</h6>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <p>Unlimited - 245 mins used this month</p>
                                </div>
                                <div class="col-md-4 usage-item">
                                    <h6>SMS Usage</h6>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" style="width: 15%;" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <p>150 of 1000 SMS used this month</p>
                                </div>
                            </div>
                            <div class="mt-4 p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm);">
                                <div class="row">
                                    <div class="col-md-4">
                                        <p><strong>Plan:</strong> Super Value Pack</p>
                                    </div>
                                    <div class="col-md-4">
                                        <p><strong>Price:</strong> ₹2,499</p>
                                    </div>
                                    <div class="col-md-4">
                                        <p><strong>Ends:</strong> Mar 15, 2025</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-history me-2 text-primary"></i> Plan History</h5>
                                    <div class="p-3 mt-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p>Jan 2025: ₹1,999<br>Dec 2024: ₹999<br>Nov 2024: ₹3,499</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-calendar-alt me-2 text-primary"></i> Upcoming Plans</h5>
                                    <div class="p-3 mt-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p>Annual: ₹12,999<br>Data Booster: ₹199</p>
                                    </div>
                                    <button class="btn btn-primary mt-3" onclick="window.location.href='plans.html'">Explore</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-star me-2 text-primary"></i> Plan Benefits</h5>
                                    <div class="p-3 mt-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p>Free OTT: Netflix<br>5G Ready<br>Priority Support</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wallet Section -->
                <div id="wallet-section" class="content-section">
                    <div class="wallet-balance">
                        <h5><i class="fas fa-wallet me-2"></i> Wallet Balance</h5>
                        <h3 id="walletBalance">₹500.00</h3>
                        <button class="btn btn-light" id="addMoneyBtn"><i class="fas fa-plus me-2"></i> Add Money</button>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="mb-3"><i class="fas fa-plus-circle me-2 text-primary"></i> Add Money</h5>
                                    <form id="addMoneyForm">
                                        <label class="form-label">Amount (₹)</label>
                                        <input type="number" class="form-control mb-2" id="addAmount" min="10" max="10000" required>
                                        <div class="error-message" id="amountError">₹10-₹10,000</div>
                                        <button type="submit" class="btn btn-primary mt-2 w-100">Add</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="mb-3"><i class="fas fa-exchange-alt me-2 text-primary"></i> Recent Transactions</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2"><i class="fas fa-arrow-up text-success me-2"></i> Feb 28: +₹200</p>
                                        <p class="mb-2"><i class="fas fa-arrow-down text-danger me-2"></i> Feb 25: -₹499</p>
                                        <p class="mb-2"><i class="fas fa-arrow-up text-success me-2"></i> Feb 20: +₹500</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="mb-3"><i class="fas fa-chart-pie me-2 text-primary"></i> Wallet Stats</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Total Added: ₹5,750</p>
                                        <p class="mb-2">Total Spent: ₹5,200</p>
                                        <p class="mb-2">Avg. Txn: ₹345</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transactions Section -->
                <div id="transactions-section" class="content-section">
                    <div class="card large-card mb-4">
                        <div class="card-header d-flex justify-content-between">
                            <h5><i class="fas fa-history me-2"></i> Recharge History</h5>
                            <button id="downloadAllTransactions" class="btn btn-sm btn-primary"><i class="fas fa-file-pdf me-1"></i> Download All</button>
                        </div>
                        <div class="card-body">
                            <table class="table" id="transactionsTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>ID</th>
                                        <th>Description</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Feb 15</td>
                                        <td>#TXN45678</td>
                                        <td>Monthly Recharge</td>
                                        <td>₹2,499</td>
                                        <td><span class="badge bg-success">Success</span></td>
                                        <td><button class="btn btn-sm btn-primary download-single" data-date="Feb 15, 2025" data-txn="#TXN45678" data-desc="Monthly Recharge" data-amount="₹2,499" data-status="Success"><i class="fas fa-download"></i></button></td>
                                    </tr>
                                    <tr>
                                        <td>Jan 25</td>
                                        <td>#TXN45677</td>
                                        <td>Data Booster</td>
                                        <td>₹199</td>
                                        <td><span class="badge bg-success">Success</span></td>
                                        <td><button class="btn btn-sm btn-primary download-single" data-date="Jan 25, 2025" data-txn="#TXN45677" data-desc="Data Booster" data-amount="₹199" data-status="Success"><i class="fas fa-download"></i></button></td>
                                    </tr>
                                    <tr>
                                        <td>Jan 15</td>
                                        <td>#TXN45676</td>
                                        <td>Monthly Recharge</td>
                                        <td>₹1,999</td>
                                        <td><span class="badge bg-success">Success</span></td>
                                        <td><button class="btn btn-sm btn-primary download-single" data-date="Jan 15, 2025" data-txn="#TXN45676" data-desc="Monthly Recharge" data-amount="₹1,999" data-status="Success"><i class="fas fa-download"></i></button></td>
                                    </tr>
                                    <tr>
                                        <td>Dec 20</td>
                                        <td>#TXN45675</td>
                                        <td>Basic Plan</td>
                                        <td>₹999</td>
                                        <td><span class="badge bg-success">Success</span></td>
                                        <td><button class="btn btn-sm btn-primary download-single" data-date="Dec 20, 2024" data-txn="#TXN45675" data-desc="Basic Plan" data-amount="₹999" data-status="Success"><i class="fas fa-download"></i></button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-file-invoice-dollar me-2 text-primary"></i> Summary</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">This Month: ₹2,698</p>
                                        <p class="mb-2">Last Month: ₹2,998</p>
                                        <p class="mb-2">Total: ₹15,495</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-credit-card me-2 text-primary"></i> Payment Methods</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Wallet: 60%</p>
                                        <p class="mb-2">UPI: 30%</p>
                                        <p class="mb-2">Card: 10%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-calendar-alt me-2 text-primary"></i> Frequency</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Monthly: 8</p>
                                        <p class="mb-2">Data Packs: 4</p>
                                        <p class="mb-2">Others: 2</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Offers Section -->
                <div id="offers-section" class="content-section">
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-tags me-2 text-primary"></i> 50% Off Annual Plan</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">₹14,999 (was ₹29,999)</p>
                                        <p class="mb-2">Valid till Mar 31, 2025</p>
                                    </div>
                                    <button class="btn btn-primary mt-3 w-100">Claim</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-film me-2 text-primary"></i> Free OTT</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">3 months free with ₹2,499</p>
                                        <p class="mb-2">Valid till Mar 15, 2025</p>
                                    </div>
                                    <button class="btn btn-primary mt-3 w-100">Get</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-wifi me-2 text-primary"></i> Extra Data</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">5 GB on ₹999+ recharges</p>
                                        <p class="mb-2">Valid till Mar 10, 2025</p>
                                    </div>
                                    <button class="btn btn-primary mt-3 w-100">Activate</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-gift me-2 text-primary"></i> Redeemed Offers</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Feb 2025: 1 GB Free</p>
                                        <p class="mb-2">Jan 2025: 10% Cashback</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-chart-bar me-2 text-primary"></i> Offer Stats</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Redeemed: 8</p>
                                        <p class="mb-2">Savings: ₹2,450</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-fire me-2 text-primary"></i> Trending Offers</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Cashback: 20% off</p>
                                        <p class="mb-2">Data Bonus: 10 GB</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings-section" class="content-section">
                    <div class="card large-card mb-4">
                        <div class="card-body">
                            <form id="settingsForm">
                                <div class="mb-3">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control" id="fullName" value="Karthik Rajan" required>
                                    <div class="error-message" id="nameError">Name cannot be empty</div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" value="karthik.rajan@example.com" required>
                                    <div class="error-message" id="emailError">Invalid email</div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Alternate Number</label>
                                    <input type="tel" class="form-control" id="altNumber" placeholder="+91">
                                    <div class="error-message" id="phoneError">Invalid number</div>
                                </div>
                                <button type="submit" class="btn btn-primary">Save</button>
                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-cog me-2 text-primary"></i> Preferences</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Notifications: On</p>
                                        <p class="mb-2">Language: English</p>
                                        <p class="mb-2">Alerts: 80%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-user me-2 text-primary"></i> Account Info</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Joined: Jan 2023</p>
                                        <p class="mb-2">Last Login: Mar 01</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-shield-alt me-2 text-primary"></i> Security</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">2FA: Enabled</p>
                                        <p class="mb-2">Last IP: 192.168.1.1</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Support Section -->
                <div id="support-section" class="content-section">
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-phone me-2 text-primary"></i> Contact</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2"><i class="fas fa-phone me-2"></i> 1-800-MOBICHARGE</p>
                                        <p class="mb-2"><i class="fas fa-envelope me-2"></i> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0e7d7b7e7e617c7a4e63616c676d666f7c696b206d6163">[email protected]</a></p>
                                    </div>
                                    <button class="btn btn-primary mt-3 w-100">Chat</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-question-circle me-2 text-primary"></i> FAQs</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2"><strong>Q:</strong> Recharge?<br><strong>A:</strong> Use Wallet</p>
                                        <p class="mb-2"><strong>Q:</strong> Failed?<br><strong>A:</strong> Contact us</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-ticket-alt me-2 text-primary"></i> Tickets</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">#T1234: Resolved</p>
                                        <p class="mb-2">#T1233: Open</p>
                                        <p class="mb-2">Last: Feb 20</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-clock me-2 text-primary"></i> Support Hours</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Chat: 9 AM - 9 PM</p>
                                        <p class="mb-2">Phone: 24/7</p>
                                        <p class="mb-2">Email: 24/7</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-map-marker-alt me-2 text-primary"></i> Address</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">123 Tech St</p>
                                        <p class="mb-2">Mumbai, MH 400001</p>
                                        <p class="mb-2">India</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5><i class="fas fa-star me-2 text-primary"></i> Feedback</h5>
                                    <div class="p-3" style="background: rgba(79, 70, 229, 0.05); border-radius: var(--rounded-sm); font-size: 0.85rem;">
                                        <p class="mb-2">Last: 4.5/5</p>
                                        <p class="mb-2">Total: 12 reviews</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="modal-confirm" id="logoutConfirm">
        <h5>Confirm Logout</h5>
        <p>Are you sure you want to logout?</p>
        <button class="btn btn-primary" id="confirmLogout">Yes</button>
        <button class="btn btn-secondary" id="cancelLogout">No</button>
    </div>
    <div class="modal-confirm" id="walletConfirm">
        <h5>Confirm Addition</h5>
        <p id="walletConfirmText"></p>
        <button class="btn btn-primary" id="confirmWallet">Yes</button>
        <button class="btn btn-secondary" id="cancelWallet">No</button>
    </div>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader"></div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sidebar Toggle
        const sidebar = document.querySelector('.sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const modalOverlay = document.getElementById('modalOverlay');

        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('expanded');
            modalOverlay.style.display = sidebar.classList.contains('expanded') ? 'block' : 'none';
        });

        modalOverlay.addEventListener('click', () => {
            sidebar.classList.remove('expanded');
            modalOverlay.style.display = 'none';
        });

        // Navigation
        function switchSection(target) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            document.querySelector(`#${target}`).classList.add('active');
            document.querySelector(`[data-target="${target}"]`).classList.add('active');
            if (window.innerWidth <= 991) {
                sidebar.classList.remove('expanded');
                modalOverlay.style.display = 'none';
            }
        }

        document.querySelectorAll('.menu-link, button[data-target]').forEach(link => {
            link.addEventListener('click', e => {
                if (!link.hasAttribute('onclick')) {
                    e.preventDefault();
                    switchSection(link.getAttribute('data-target'));
                }
            });
        });

        // Logout
        const logoutLink = document.getElementById('logoutLink');
        const logoutConfirm = document.getElementById('logoutConfirm');
        const loadingOverlay = document.getElementById('loadingOverlay');

        logoutLink.addEventListener('click', e => {
            e.preventDefault();
            modalOverlay.style.display = 'block';
            logoutConfirm.style.display = 'block';
        });

        document.getElementById('confirmLogout').addEventListener('click', () => {
            modalOverlay.style.display = 'none';
            logoutConfirm.style.display = 'none';
            loadingOverlay.style.display = 'flex';
            setTimeout(() => {
                localStorage.clear();
                window.location.href = 'homepage.html';
            }, 1500);
        });

        document.getElementById('cancelLogout').addEventListener('click', () => {
            modalOverlay.style.display = 'none';
            logoutConfirm.style.display = 'none';
        });

        // PDF Downloads
        const { jsPDF } = window.jspdf;
        document.getElementById('downloadAllTransactions').addEventListener('click', () => {
            const doc = new jsPDF();
            doc.autoTable({ html: '#transactionsTable' });
            doc.save('transactions.pdf');
        });

        document.querySelectorAll('.download-single').forEach(btn => {
            btn.addEventListener('click', () => {
                const doc = new jsPDF();
                const data = btn.dataset;
                doc.text(`Receipt\n\nDate: ${data.date}\nID: ${data.txn}\nDescription: ${data.desc}\nAmount: ${data.amount}\nStatus: ${data.status}`, 20, 20);
                doc.save(`txn_${data.txn}.pdf`);
            });
        });

        // Wallet
        let balance = parseFloat(localStorage.getItem('walletBalance')) || 500;
        document.getElementById('walletBalance').textContent = `₹${balance.toFixed(2)}`;
        document.getElementById('dashWallet').textContent = `₹${balance.toFixed(2)}`;

        document.getElementById('addMoneyForm').addEventListener('submit', e => {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('addAmount').value);
            const error = document.getElementById('amountError');

            if (!amount || amount < 10 || amount > 10000) {
                document.getElementById('addAmount').classList.add('invalid');
                error.style.display = 'block';
                return;
            }

            document.getElementById('walletConfirmText').textContent = `Add ₹${amount} to your wallet?`;
            modalOverlay.style.display = 'block';
            document.getElementById('walletConfirm').style.display = 'block';
            document.getElementById('confirmWallet').onclick = () => {
                balance += amount;
                localStorage.setItem('walletBalance', balance);
                document.getElementById('walletBalance').textContent = `₹${balance.toFixed(2)}`;
                document.getElementById('dashWallet').textContent = `₹${balance.toFixed(2)}`;
                document.getElementById('addAmount').value = '';
                document.getElementById('addAmount').classList.remove('invalid');
                error.style.display = 'none';
                modalOverlay.style.display = 'none';
                document.getElementById('walletConfirm').style.display = 'none';
                alert('Money added successfully!');
            };
            document.getElementById('cancelWallet').onclick = () => {
                modalOverlay.style.display = 'none';
                document.getElementById('walletConfirm').style.display = 'none';
            };
        });

        // Settings
        document.getElementById('settingsForm').addEventListener('submit', e => {
            e.preventDefault();
            const name = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const altNumber = document.getElementById('altNumber').value.trim();
            let valid = true;

            if (!name) {
                document.getElementById('fullName').classList.add('invalid');
                document.getElementById('nameError').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('fullName').classList.remove('invalid');
                document.getElementById('nameError').style.display = 'none';
            }

            if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                document.getElementById('email').classList.add('invalid');
                document.getElementById('emailError').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('email').classList.remove('invalid');
                document.getElementById('emailError').style.display = 'none';
            }

            if (altNumber && !/^\+91\d{10}$/.test(altNumber)) {
                document.getElementById('altNumber').classList.add('invalid');
                document.getElementById('phoneError').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('altNumber').classList.remove('invalid');
                document.getElementById('phoneError').style.display = 'none';
            }

            if (valid) {
                localStorage.setItem('userName', name);
                localStorage.setItem('userEmail', email);
                localStorage.setItem('altNumber', altNumber);
                document.getElementById('userName').textContent = name;
                document.getElementById('welcomeName').textContent = name.split(' ')[0];
                alert('Settings saved successfully!');
            }
        });

        // Load Saved Data
        document.addEventListener('DOMContentLoaded', () => {
            const savedName = localStorage.getItem('userName') || 'Karthik Rajan';
            const savedEmail = localStorage.getItem('userEmail') || 'karthik.rajan@example.com';
            const savedAltNumber = localStorage.getItem('altNumber') || '';
            document.getElementById('fullName').value = savedName;
            document.getElementById('email').value = savedEmail;
            document.getElementById('altNumber').value = savedAltNumber;
            document.getElementById('userName').textContent = savedName;
            document.getElementById('welcomeName').textContent = savedName.split(' ')[0];

            const loggedin = localStorage.getItem("loggedin") === "true";
            const logoutBtn = document.getElementById("logoutBtn");
            const profileBtn = document.getElementById("profile");
            const logoutSection = document.getElementById("logout");

            if (loggedin) {
                logoutSection.style.display = "block";
                profileBtn.style.display = "block";
                logoutBtn.style.display = "none";
            } else {
                logoutSection.style.display = "none";
                profileBtn.style.display = "none";
                logoutBtn.style.display = "block";
            }

            logoutSection.addEventListener("click", () => {
                localStorage.removeItem("loggedin");
                window.location.reload();
            });
        });
    </script>
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'91a638ac781553f9',t:'MTc0MDk3NDM2OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>